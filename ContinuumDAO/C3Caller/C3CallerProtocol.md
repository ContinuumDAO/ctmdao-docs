## C3Caller Protocol

### Overview

C3Caller enables sending cross-chain messages through a user's dApp by writing smart contracts on both the source and destination blockchains.

Once a dApp is registered and its contracts are successfully deployed, it automatically interfaces with the C3Caller Proxy Contract. This setup allows for the seamless transmission of messages from the source to the destination chain, facilitating interoperable blockchain applications.

<img src="/_media/C3CallerWorkingMechanism.png"  alt=""/>

### How it Works

1. **Implementation and Messaging**  Your dApp contract must implement ‘C3CallerDapp’. If not already done, please refer to the Quick Start guide. When the user calls `c3call` to send a message, they only need to pass three params and it will emit an event on EVM chains through `C3Caller`. See the structure below:

```
// C3CallerDapp's c3call function
function c3call(
    string memory _to, // Target chain contract address
    string memory _toChainID, // Target chain ID
    bytes memory _data // Calldata
) internal;
```

When a message is sent using the ‘c3call’ function, three parameters are required, which triggers an event on EVM chains via ‘C3Caller’. The ‘dappID’ identifies your Dapp to the Relayer, and a unique ‘uuid’ identifies each message. Upon emitting the event, a scanner notifies the Relayer to process the transaction.

2. **Relayer and MPC Network** Relayer is a high-performance system that can verify and build the raw execute tx. It is also a client for the MPC network to request a signature for a new execute tx. During the signing process, the MPC nodes will check the source tx using the custom request defined by the dApp. see MPC Verify.

3. **Execution and Fallback** When Relayer gets a signature, it will submit the tx as soon as possible. And C3Caller will call dApp’s target contract and pass the calldata like below, the `context()` function in `C3CallerDapp` could be called by dApp contract to get crosschain info like uuid, fromChainID, sourceTx . What a dApp needs to do is to return a bool to tell C3Caller if they want to fallback this tx or not, True for success, False for Failed.

```
event LogFallbackCall(
    uint256 indexed dappID, // target dappId
    bytes32 indexed uuid, // the unique key in c3caller
    string to, // the source chain contract address
    bytes data // the call data when c3call passed
);
```



### Contract Structure

**Overview**

<img src="/_media/C3CallerContractStructure.png"  alt=""/>

Contracts in the C3Caller ecosystem have distinct roles, ensuring the protocol's decentralization and security.

**Roles**

- Operator: Generated by the MPC network, operators have the exclusive authority to execute transactions verified by source chain data.
- Governance: Details on governance are provided, focusing on community-based control and decision-making.

